* introduction
- z ist optische achse
** parameter
 - single step
 - surface and transition
 - wenn man ein system mit n flaechen hat, dann ist n immer die
   bildebene und die objektebene hat index 0
 - erster abstand hat index 0 und n-ter abstand wird nicht mehr
   benoetigt -- das findet er nicht masslos clever
 - ray path has fixed sequence 0,1, .. (n-1)
 - in anderen programmen ist das zum teil anders
 - 7 leute haben zemax am arbeitsplatz. am iap gibts nur wenige
 - professor gross wird neues zemax befassen
 - folien gibts auf iap seite
 - notwendige daten
   - system surfaces (radius)
   - distances and parameters (length, material)
   - stop surfaces
   - wavelengths
   - aperture
   - field points
 - optionale inputs
   - finite diameter
   - vignetting factors
   - decenter and tilt
   - coordinate reference
   - weighting factors for wavelengths and field points
   - multi configurations
   - ...

- f2 druecken um im zellen modus zahlen zu editieren
- skalieren von systemen (patent daten analysieren) .. werden immer
  auf brennweite 100 normiert (scale factor, wellenlaenge und beugung
  werden nicht veraendert, asphaerenkonstanten werden intern
  veraendert)
- kataloglinsen einsetzen und umdrehen

- was man an einer flaeche festlegen kann
  - mit rechter maus auf zelle druecken Surface properties
  - kugel, asphaere, kegelschnitt, toroidal lens (cylinder lens),
    ideal lens, coordinate break (pseudoflaeche an der koordinaten
    transformiert werden)
  - linsenschnitt farbig hervorheben (z.b. kaufkomponenten gruen)
  - linsen vorruebergehend inaktiv schalten

** solves
 - chief ray angle (hauptstrahlwinkel z.b. bildraum telezentrisch)
 - marginal ray normal
 - aplanatic surface
 - element power
 - marginal ray height (randstrahl hoehe im bild 0, frueher hat man
   die letzte flaeche immer so gekruemmt, dass die in der bildebene
   liegt)
 - pickup
   - holt sich wert des radius von woanders, z.b. bei symmetrischen
     systemen oder wenn baulaenge festgelegt ist

** 3d geometrie
- man muss pseudoflaeche einfuehren
- komischerweise kann es keine verschiebung in z aber das kann man
  ueber die dicke machen
- alle moeglichen drehwinkel sind moeglich  
- gruppe kippen oder zentrieren (z.b. ganzes objektiv oder fuer
  toleranzen)
- faltspiegel
  - erst koordinatensystem in spiegel drehen
  - dann spiegelwirkung
  - dann nochmal spiegel koordinatensystem
- surface properties / tilt-decenter
  - wenn vor und hinter der flaeche +20 grad und -20 grad wird flaeche
    gekippt, bisschen tueckisch
- zeigt wie linsengruppe um 5mm in y verschoben wird
  - insert, coordinatee break
  - kann layout nicht mehr malen (nicht rotationssymmetrisch)
  - stattdessen layout 3d, zeigt auch linien der randzylinder (lens
    edges)
  - in coordinate break linie decenter y auf 5mm setzen
  - hinter der letzten flaeche einen coordinate break einsetzen y auf
    -5mm
  - update in layout 3d druecken
  - pickup in zweiten coordinaten break setzen mit scale factor -1,
    bei dicken muss man offset machen
  - dann steht ein P neben den wert in der tabelle
- flaeche um 10 grad kippen, dahinter um -10 grad
- linke maustaste fenster in 3d layout um zu zoomen, unzoom
- window clone, und dann flaeche wieder zurueckkippen, wenn man nicht
  update in beiden drueckt, kann man vergleichen. overlay geht auch
- heutzutage nutzt man kippen zum korrigieren (z.b. headmounted
  device)
- heute bis 12:30

* definition of aperture and field
- lichtkegel mit dem system licht transportiert (mikroskopiker: je
  groesser oeffnungswinkel, mehr energie, mehr information; man
  verlaesst aber paraxial bereich und die performance wird schlechter)
- randstrahlen begrenzen den kegel
- groesse vom objektpunkt macht kegel windschief, mittlerer strahl ist
  hauptstrahl
- abbildbare flaeche * winkel ist lagrange invariante
- transportmass, dass das optiksystem korrigiert
- unterschied fotographie (coma, verzeichnung, astigmatismus),
  mikroskopie
- lithographie objektiv hat grosses feld und grosse winkel (aber nur
  eine wellenlaenge)
- beugung an apertur bewirkt airy verteilung
- man braucht also nicht besser optimieren als die airy verteilung
- bei einzellinse sin u \approx 0.05 noch beugungsbegrenzt
- achromat bis na=0.1 immer noch beugungsbegrenzt
- darueber muss man mehr aufwand treiben
- f-zahl F#=f'/Dex
- fuer kleine aperturen F#=1/(2 NA)
- stop position 
- hauptstrahl geht durch die mitte dieser blendenebene (vom rand des
  objekts)
- randstrahl geht durch die kante (von mitte des objekts)
- es ist nicht immer klar wo die blende ist, verallgemeinert zu pupille
- physische blende in beide raeume abbilden nach objekt
  (eintrittspupille) und bildraum (austrittspupille)
- sind alle zueinander konjugiert, d.h. gehen durch abbildung
  auseinander hervor
- pupille legt den lichtstrom und die aufloesung fest, perspektive
- wenn man zwei systeme zusammenbaut, muss man die pupillen matchen
  (nicht nur die sehfelder)
- pupille das auges (3.2 mm hinter der cornea), okular muss eine
  entsprechende pupille haben
- wenn nutzer eine brille traegt noch schwieriger
- d.h. okular muss pupille mind. 20mm hinter der linse haben
- sonst schaut man wie in ein schluesselloch und das feld schrumpft
  sehr schnell zusammen
- lage der eintrittspupille mit hauptstrahl, durchmesser mit
  randstrahl

- paraxiale und reale oeffnung muessen nicht identisch sein (bei
  grossen aberrationen)
- floating aperture by stop size, macht den kegel immer weiter auf,
  bis er an irgendeinen rand stoesst
- telezentrisch: hauptstrahl parallel zur optischen axe -> pupille ist
  im unendlichen, dass muss man zemax explizit setzen, da ist auch
  egal wo man den stop hinsetzt
- afocal bild im unendlichen ist auch ein sonderfall
 - dann macht spot diagram im bildraum keinen sinn. man muss das dann
   im winkelraum machen. in zemax heisst das cosine space
 - da braucht man planwelle als bezug

- field data
 - man kann bis zu 12 feld positionen definieren
 - das ist sehr wenig fuer anamorphie
 - vignettierungsfaktor (am rand ist der kegel kleiner, z.b. 70%)

- suppress frame, damit mehr platz fuer das diagramm ist
- in etwa spiegelsymmetrisch hilft unheimlich um asymmetrische fehler
  zu korrigieren
- 2d layout
- hauptwellenlaenge ist meist die zweite
- lasersysteme sind oft sehr gestreckt. dafuer kann man eine
  anamorphotische darstellung machen (y-stretch)
- analysis layout shaded model
- mit gedrueckter maus das system drehen
- opacity
- strahl ring ist am angenehmsten
- durchgeschnittenes objektiv (draw section)

- materialien auf naechste woche verschoben
- zwei uebungen hat er upgeloaded

* scheme of raytrace
- radius vorzeichen wird genutzt, um die richtige surface zu ermitteln
- spiegel: medium ist mirror (ab da alle dicken negativ, wechselt von
  rechts in linkssystem) -> sehr gewoehnungsbeduerftig
- \r'=\D_H \R_H \F \R_V \D_V \F
- equation of surface 2. order
- konstanten enthalten flaechenparameter
- c = 1/R kruemmung (planflaeche stetig)
- zwei schiefe dicke 

- probleme:
 - linse mit negativer randdicke, da meckert siemens nicht
 - totalreflexion, da meckert zemax und hoert mit raytrace auf
 - physisch linse nicht getroffen (delete vignetting, damit die
strahlen gestoppt werden)

- ebener strahlfaecher (ray fan)
- pupillenflaeche erfassen durch sampling in der pupille (ray cone)
 - polar grid
 - cartesian (rand ist schlecht)
 - isoenergetic circular (ist ganz gut, vielleicht fuer mma?)
 - hexgonal (erfasst rand ganz gut)
 - statistical (gibts mittlerweile besseres: walton statistik ohne
   loecher)

